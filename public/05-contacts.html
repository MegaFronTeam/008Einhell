<!DOCTYPE html>
<html lang="ru">
	<head>
		<meta charset="utf-8">
		<title>Contacts</title>
		<meta name="description" content="о чем страница">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width,initial-scale=1.0,  shrink-to-fit=no, viewport-fit=cover">
		<link type="image/ico" href="img/favicon.ico" rel="shortcut icon"><meta name="format-detection" content="telephone=no"> 
		<link href="libs/swiper/swiper-bundle.min.css" rel="stylesheet"/>
		<link href="libs/@fancyapps/ui/fancybox/fancybox.css" rel="stylesheet"/>
		<link rel="preload" href="fonts/OpenSansRegular.woff2" as="font" type="font/woff2" crossorigin="crossorigin"/>
		<link rel="preload" href="fonts/OpenSansBold.woff2" as="font" type="font/woff2" crossorigin="crossorigin"/>
		<link rel="preload" href="fonts/OpenSansLight.woff2" as="font" type="font/woff2" crossorigin="crossorigin"/>
		<link rel="preload" href="fonts/OpenSansSemiBold.woff2" as="font" type="font/woff2" crossorigin="crossorigin"/>
		<link rel="preload" href="fonts/OpenSans_CondensedBold.woff2" as="font" type="font/woff2" crossorigin="crossorigin"/>
		<link href="css/custom-bootstrap.min.css" rel="stylesheet"/>
		<link href="css/main.min.css" rel="stylesheet"/>
		<script>
			function addBlock(elem) {
				fetch(`parts/${elem}.html`)
					.then(response => response.text())
					.then( text => {
						const wrap = document.querySelector(`#${elem}Wrap`);
						wrap.insertAdjacentHTML('afterend', text);
						wrap.previousElementSibling.remove()
						wrap.remove();
					});
			}
		</script>
	</head>
	<body class="main-page">
		<div class="main-wrapper">
			<script>addBlock(`header`)</script>
			<div id="headerWrap"></div>
			<main>
				<div class="container">
					<nav class="swiper breadcrumb-slider--js" aria-label="breadcrumb">
						<ol class="breadcrumb swiper-wrapper" itemscope="itemscope" itemtype="http://schema.org/BreadcrumbList">
							<li class="breadcrumb-item swiper-slide" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem"><a href="/" itemprop="item"><span itemprop="name">Главная</span>
									<meta itemprop="position" content="1"/></a></li>
							<li class="breadcrumb-item active swiper-slide" itemprop="itemListElement" itemscope="itemscope" itemtype="http://schema.org/ListItem"><a href="#" itemprop="item"><span itemprop="name">Контакты</span>
									<meta itemprop="position" content="2"/></a></li>
						</ol>
					</nav>
				</div>
				<!-- start sContact-->
				<section class="sContact section" id="sContact">
					<div class="sContact__wrapper">
						<div class="container wrapper-container">
							<div class="row">
								<div class="box col-sm-auto">
									<div class="title-wrapper">
										<h1>Контактная информация</h1>
										<p>Реквизиты и адрес организации</p>
									</div>
								</div>
								<div class="col-sm picture-wrap"> <img class="res-i" src="img/contacts.png"/></div>
							</div>
						</div>
					</div>
					<div class="sContact__map">
						<div id="map"></div>
					</div>
					<div class="container cards-container">
						<div class="sContact__cards cards">
							<div class="sContact__card">
								<div class="sContact__title card-title">Адрес организации
								</div>
								<div class="sContact__desciption">
									<ul class="list">
										<li class="item item_no-mb">ООО «Айнхелль»</li>
										<li class="item">Российская Федерация</li>
										<li class="item">197022, Санкт-Петербург г, вн.тер.г. муниципальный округ Аптекарский остров, ул. Профессора Попова, д. 23, литер Д, пом. 27Н, офис 310</li>
										<li class="item">(на территории БЦ Бизнес-мегаполис "Гайот")</li>
									</ul>
								</div>
							</div>
							<div class="sContact__card">
								<div class="sContact__title card-title">Телефон горячей линии
								</div>
								<div class="sContact__desciption">
									<ul class="list list-box">
										<li class="item detail-wrapper"><a href="tel:+78007755155">
												<svg class="icon">
													<use xlink:href="img/svg/sprite.svg#phone"></use>
												</svg>
												<p>+7 (800) 775-51-55</p></a></li>
										<li class="item detail-wrapper">
											<svg class="icon">
												<use xlink:href="img/svg/sprite.svg#time"></use>
											</svg>
											<p>c 9:00 до 17:30</p>
										</li>
									</ul>
								</div>
							</div>
							<div class="sContact__card">
								<div class="sContact__title card-title">Факс
								</div>
								<div class="sContact__desciption">
									<ul class="list list-box">
										<li class="item detail-wrapper"><a href="tel:+78124488349">
												<svg class="icon">
													<use xlink:href="img/svg/sprite.svg#fax"></use>
												</svg>
												<p>+7 (812) 448-83-49</p></a></li>
									</ul>
								</div>
							</div>
							<div class="sContact__card">
								<div class="sContact__title card-title">Email
								</div>
								<div class="sContact__desciption">
									<ul class="list list-box">
										<li class="item detail-wrapper"><a href="mailto:welcome@einhell-russia.ru">
												<svg class="icon">
													<use xlink:href="img/svg/sprite.svg#email"></use>
												</svg>
												<p>welcome@einhell-russia.ru</p></a></li>
										<li class="item detail-wrapper"><a href="mailto:service@einhell-russia.ru">
												<svg class="icon">
													<use xlink:href="img/svg/sprite.svg#email"></use>
												</svg>
												<p>service@einhell-russia.ru (<span class="span_red">сервисная служба</span>)</p></a></li>
									</ul>
								</div>
							</div>
							<div class="sContact__card">
								<div class="sContact__title card-title">Отдел маркетинга
								</div>
								<div class="sContact__desciption">
									<ul class="list list-box">
										<li class="item detail-wrapper contact-us">«Мы нацелены на широкий медийный охват торговой марки Einhell в России, поэтому с радостью ознакомимся с любыми Вашими предложениями!»</li>
										<li class="item detail-wrapper"><a href="mailto:welcome@einhell-russia.ru">
												<svg class="icon">
													<use xlink:href="img/svg/sprite.svg#email"></use>
												</svg>
												<p>welcome@einhell-russia.ru</p></a></li>
									</ul>
								</div>
							</div>
							<div class="sContact__card">
								<div class="sContact__title card-title">Декларация об осуществлении деятельности на территории г. Санкт-Петербурга
								</div>
								<div class="sContact__desciption">
									<ul class="list list-box">
										<li class="item detail-wrapper"><a class="link" href="#">
												<svg class="icon">
													<use xlink:href="img/svg/sprite.svg#open"></use>
												</svg>
												<p>Открыть</p></a></li>
									</ul>
								</div>
							</div>
						</div>
						<div class="sContact__qr-wrapper">
							<div class="red-box"></div><img class="img" src="img/qr.png" alt="qr"/>
						</div>
					</div>
				</section>
				<!-- end sContact-->
			</main>
			<script>addBlock(`footer`)</script>
			<div id="footerWrap"></div>
		</div>
		<script src="libs/jquery/jquery.min.js"></script>
		<script src="libs/@fancyapps/ui/fancybox/fancybox.umd.js"> </script>
		<script src="libs/swiper/swiper-bundle.min.js"> </script>
		<script src="libs/inputmask/inputmask.min.js"> </script>
		<script src="libs/hc-sticky/hc-sticky.js"> </script>
		<script src="js/JSCCommon.js"></script>
		<script src="js/common.js"></script>
		<script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=2066e304-cee0-4ed2-9cb2-5f6521d5f96c"> </script>
		<script>
var myMap, objectManager
function initMap() { 
	var center = [4.75380038320217, 90.62071970898438];
	myMap = new ymaps.Map('map', {
		center: center,
		// center: coords[0],
		zoom: 14,
		clusterize: true,
		gridSize: 34,
		controls: ['zoomControl']
	});

	objectManager = new ymaps.ObjectManager({
		// Чтобы метки начали кластеризоваться, выставляем опцию.
		clusterize: true,
		// ObjectManager принимает те же опции, что и кластеризатор.
		gridSize: 34,
		clusterDisableClickZoom: true
});

				// Чтобы задать опции одиночным объектам и кластерам,
		// обратимся к дочерним коллекциям ObjectManager.
		objectManager.objects.options.set({
			iconLayout: 'default#image',
			iconImageHref: 'img/pin-map.png',
			iconImageSize: [37, 46],
			iconImageOffset: [-24, -38]
		});
		objectManager.clusters.options.set('preset', 'islands#redClusterIcons');

		myMap.geoObjects.add(objectManager)
		
		
		let  points = [];
		let getPixelBounds = [];
		$.ajax({
			url: "data-page.json"
		}).done(function(data) {
			objectManager.add(data); 
			points.push(data.features)
			getPixelBounds = objectManager.getPixelBounds();

			
			myMap.setBounds(myMap.geoObjects.getBounds(), {
				checkZoomRange: true
		});
		});
	
	let searchList = document.querySelector(".search-block__result"); 
	if (!searchList) return;
	function showBaloon(index, el) {
		
		var objectState = objectManager.getObjectState(el); 
		myMap.setCenter(points[0][index].geometry.coordinates, 14);

		myMap.geoObjects.add(objectManager);
				// if (objectState.isClustered) {
				//     // Сделаем так, чтобы указанный объект был "выбран" в балуне.
				//     objectManager.clusters.state.set('activeObject', objectManager.objects.getById(el));
				//     // Все сгенерированные кластеры имеют уникальные идентификаторы.
				//     // Этот идентификатор нужно передать в менеджер балуна, чтобы указать,
				//     // на каком кластере нужно показать балун.
				//     objectManager.clusters.balloon.open(objectState.cluster.id);
				// } else {
						objectManager.objects.balloon.open(el);
				// }
	}
	searchList.addEventListener("click", function (e) {
		const target = e.target.closest(".search-block__link")
		if (!target) return;
		e.preventDefault();
		showBaloon(target.dataset.index, target.dataset.coords)
		// ymaps.geoQuery(geoObjects).getClosestTo().balloon.open();  
	})

	let input = document.querySelector("#suggest1");
	input.addEventListener('input', function () {
		var filter, ul, li, a, i;
		filter = this.value.toUpperCase(); 
		searchList.innerHTML = '';
		for (i = 0; i < points[0].length; i++) { 
			let title= points[0][i].properties.balloonContentHeader
			let id = points[0][i].id
			if (title.toUpperCase().indexOf(filter) > -1) {
				let text = `
					<li class="sRpnContent__search-item">
						<a href="#" class="sRpnContent__search-link" data-index="${i}" data-coords="${id}">
							${title}
						</a>
					</li>
			`
			searchList.insertAdjacentHTML('beforeend', text);
				// li[i].style.display = "";
			} else {
				// li[i].style.display = "none";
			}
		}
	})


	let button = document.querySelector(".sRpnContent__search button");
	button.addEventListener('click', function () {
		var filter, ul, li, a, i;
		filter = input.value.toUpperCase();
		let searchList = document.getElementById("myDropdown");
		li = searchList.querySelectorAll("li");

		for (i = 0; i < li.length; i++) {
			let txtValue = li[i].querySelector("a").innerText;
			if (txtValue.toUpperCase().indexOf(filter) > -1) {
				showBaloon(li[i].querySelector("a"))
				document.querySelector(".sRpnContent__search-result").classList.remove('active');
			}
		}
	})

}; 

ymaps.ready(initMap);  
		</script>
	</body>
</html>